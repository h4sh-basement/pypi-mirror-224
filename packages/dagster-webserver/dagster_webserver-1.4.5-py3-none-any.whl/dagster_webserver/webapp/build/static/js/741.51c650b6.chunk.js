"use strict";(self.webpackChunk_dagster_io_app_oss=self.webpackChunk_dagster_io_app_oss||[]).push([[741],{38527:function(e,n,t){t.d(n,{m:function(){return l}});var r,i=t(71171),o=(t(78193),t(60319)),s=t(40302),c=t(69059),a=t(35936),l=function(e){var n=e.title,t=e.tags,r=e.right,i=e.tabs;return(0,a.jsxs)(u,{background:c.w.Gray50,padding:{top:16,left:24,right:12},border:{side:"bottom",width:1,color:c.w.KeylineGray},children:[(0,a.jsxs)(s.x,{flex:{direction:"row",justifyContent:"space-between"},padding:{bottom:16},children:[(0,a.jsxs)(s.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[n,t]}),r]}),i]})},u=(0,o.ZP)(s.x)(r||(r=(0,i.Z)(["\n  width: 100%;\n\n  /**\n   * Blueprint breadcrumbs annoyingly have a built-in height.\n   */\n  .bp4-breadcrumbs {\n    height: auto;\n  }\n"])))},23028:function(e,n,t){t.d(n,{a:function(){return c}});var r=t(96234),i=t(78193),o=function(e,n){var t=new Set(Array.from(e.checkedIds));switch(n.type){case"toggle-one":var i=n.payload,o=i.checked,s=i.id;return o?t.add(s):t.delete(s),{lastCheckedId:s,checkedIds:t};case"toggle-slice":var c=n.payload,a=c.checked,l=c.id,u=c.allIds,d=e.lastCheckedId,p=d?u.indexOf(d):-1,h=u.indexOf(l);if(-1===p||-1===h)return e;var x=[p,h].sort(),m=(0,r.Z)(x,2),f=m[0],g=m[1];return u.slice(f,g+1).forEach((function(e){a?t.add(e):t.delete(e)})),{lastCheckedId:l,checkedIds:t};case"toggle-all":var j=n.payload,v=j.checked,y=j.allIds;return{lastCheckedId:null,checkedIds:v?new Set(y):new Set}}},s={checkedIds:new Set,lastCheckedId:null};function c(e){var n=i.useReducer(o,s),t=(0,r.Z)(n,2),c=t[0],a=t[1];return[c,{onToggleFactory:function(n){return function(t){var r=t.checked;t.shiftKey&&c.lastCheckedId?a({type:"toggle-slice",payload:{checked:r,id:n,allIds:e}}):a({type:"toggle-one",payload:{checked:r,id:n}})}},onToggleAll:function(n){a({type:"toggle-all",payload:{checked:n,allIds:e}})}}]}},65534:function(e,n,t){t.d(n,{_:function(){return c}});var r,i=t(71171),o=t(90239),s=t(31623),c=function(){var e=(0,o.a)(a).data;return!(null===e||void 0===e||!e.instance.hasInfo)},a=(0,s.Ps)(r||(r=(0,i.Z)(["\n  query InstanceConfigHasInfo {\n    instance {\n      id\n      hasInfo\n    }\n  }\n"])))},8512:function(e,n,t){t.d(n,{m:function(){return g}});var r=t(96234),i=t(16854),o=t(40302),s=t(69059),c=t(36318),a=t(85049),l=t(48439),u=t(58760),d=t(83421),p=t(78193),h=t(97412),x=t(14581),m=t(45384),f=t(35936),g=p.memo((function(e){var n=e.assetKeys,t=e.useTags,g=e.modalTitle,j=void 0===g?"Assets in Run":g,v=p.useState(!1),y=(0,r.Z)(v,2),w=y[0],C=y[1];if(!n||!n.length)return null;var Z=n.length,b=Z<=3?n:[],k=Z-b.length,R=k>0?(0,f.jsxs)(i.Vq,{title:j,onClose:function(){return C(!1)},style:{minWidth:"400px",maxWidth:"80vw",maxHeight:"70vh"},isOpen:w,children:[w?(0,f.jsx)(o.x,{padding:{bottom:12},border:{side:"bottom",color:s.w.KeylineGray,width:1},style:{overflowY:"auto"},background:s.w.White,children:(0,f.jsxs)(c.i,{children:[(0,f.jsx)("thead",{children:(0,f.jsx)("tr",{children:(0,f.jsx)("th",{children:"Asset key"})})}),(0,f.jsx)("tbody",{children:n.map((function(e,n){return(0,f.jsx)("tr",{children:(0,f.jsx)("td",{children:(0,f.jsx)(h.rU,{to:(0,m.p)(e),children:(0,x.ll)(e)},(0,x.Je)(e))})},"".concat((0,x.Je)(e),"-").concat(n))}))})]})}):null,(0,f.jsx)(i.cN,{children:(0,f.jsx)(a.zx,{intent:"primary",autoFocus:!0,onClick:function(){return C(!1)},children:"OK"})})]}):void 0;return t?(0,f.jsxs)(f.Fragment,{children:[b.map((function(e,n){return(0,f.jsx)(h.rU,{to:(0,m.p)(e),children:(0,f.jsx)(l.V,{intent:"none",interactive:!0,icon:"asset",children:(0,x.ll)(e)})},"".concat((0,x.Je)(e),"-").concat(n))})),k>0&&(0,f.jsx)(u.Z,{onClick:function(){return C(!0)},children:(0,f.jsxs)(l.V,{intent:"none",icon:"asset",children:[k," assets"]})}),R]}):(0,f.jsxs)(o.x,{flex:{direction:"row",gap:8},children:[(0,f.jsx)(d.JO,{color:s.w.Gray400,name:"asset",size:16,style:{marginTop:2}}),(0,f.jsxs)(o.x,{style:{flex:1},flex:{wrap:"wrap",display:"inline-flex"},children:[b.map((function(e,n){return(0,f.jsx)(h.rU,{to:(0,m.p)(e),style:{marginRight:4},children:"".concat((0,x.ll)(e)).concat(n<b.length-1?",":"")},(0,x.Je)(e))})),k>0&&b.length>0?(0,f.jsx)(u.Z,{onClick:function(){return C(!0)},children:" + ".concat(k," more")}):k>0?(0,f.jsx)(u.Z,{onClick:function(){return C(!0)},children:"".concat(k," assets")}):void 0]}),R]})}))},36355:function(e,n,t){t.d(n,{N:function(){return Z}});var r=t(32723),i=t(34795),o=t(96234),s=t(56666),c=t(33028),a=t(15541),l=t(60864),u=t(49668),d=t(85049),p=t(83421),h=t(69059),x=t(99600),m=t(16854),f=t(78193),g=t(78222),j=t(43371),v=t(35936),y=function(e){if("DeletePipelineRunSuccess"===(null===e||void 0===e?void 0:e.deletePipelineRun.__typename))throw new Error("Not an error!");return null===e||void 0===e?void 0:e.deletePipelineRun},w=function(e){return{step:"initial",frozenRuns:e,deletion:{completed:0,errors:{}}}},C=function(e,n){switch(n.type){case"reset":return w(n.frozenRuns);case"start":return(0,c.Z)((0,c.Z)({},e),{},{step:"deleting"});case"deletion-success":var t=e.deletion;return(0,c.Z)((0,c.Z)({},e),{},{step:"deleting",deletion:(0,c.Z)((0,c.Z)({},t),{},{completed:t.completed+1})});case"deletion-error":var r=e.deletion;return(0,c.Z)((0,c.Z)({},e),{},{step:"deleting",deletion:(0,c.Z)((0,c.Z)({},r),{},{completed:r.completed+1,errors:(0,c.Z)((0,c.Z)({},r.errors),{},(0,s.Z)({},n.id,n.error))})});case"complete":return(0,c.Z)((0,c.Z)({},e),{},{step:"completed"})}},Z=function(e){var n=e.isOpen,t=e.onClose,s=e.onComplete,c=e.onTerminateInstead,Z=e.selectedRuns,b=f.useRef(Z),k=f.useReducer(C,b.current,w),R=(0,o.Z)(k,2),E=R[0],O=R[1],T=Object.keys(E.frozenRuns),N=T.length,A=T.filter((function(e){return E.frozenRuns[e]})).length;f.useEffect((function(){n&&O({type:"reset",frozenRuns:b.current})}),[n]),f.useEffect((function(){n||(b.current=Z)}),[n,Z]);var I=(0,a.D)(j.be),S=(0,o.Z)(I,1)[0],P=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,t,i,o,c,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O({type:"start"}),n=Object.keys(E.frozenRuns),t=0,i=n;case 3:if(!(t<i.length)){e.next=13;break}return o=i[t],e.next=7,S({variables:{runId:o}});case 7:c=e.sent,"DeletePipelineRunSuccess"===(null===(a=c.data)||void 0===a?void 0:a.deletePipelineRun.__typename)?O({type:"deletion-success"}):O({type:"deletion-error",id:o,error:y(a)});case 10:t++,e.next=3;break;case 13:O({type:"complete"}),s();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z="deleting"!==E.step;return(0,v.jsxs)(m.Vq,{isOpen:n,title:"Delete runs",canEscapeKeyClose:z,canOutsideClickClose:z,onClose:t,children:[(0,v.jsx)(m.a7,{children:(0,v.jsxs)(u.Z,{direction:"column",spacing:24,children:[function(){switch(E.step){case"initial":return(0,v.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,v.jsx)("div",{children:"".concat(N," ").concat(1===N?"run":"runs"," will be deleted.")}),(0,v.jsx)("div",{children:"Deleting runs will not prevent them from continuing to execute, and may result in unexpected behavior."}),A?(0,v.jsx)("div",{children:A>1?(0,v.jsxs)(v.Fragment,{children:["".concat(A," of these runs can be terminated. "),(0,v.jsx)("strong",{children:"Please consider terminating these runs instead of deleting them."})]}):(0,v.jsxs)(v.Fragment,{children:["1 run can be terminated instead. ",(0,v.jsx)("strong",{children:"Please consider terminating this run instead of deleting it."})]})}):null,(0,v.jsx)("div",{children:"Do you wish to continue with deletion?"})]});case"deleting":case"completed":var e=N>0?E.deletion.completed/N:1;return(0,v.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,v.jsx)("div",{children:"Deleting\u2026"}),(0,v.jsx)(l.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"deleting"===E.step?(0,v.jsx)(g.c,{message:"Deletion in progress, please do not navigate away yet."}):null]});default:return null}}(),function(){if("initial"===E.step)return null;if("deleting"===E.step)return(0,v.jsx)("div",{children:"Please do not close the window or navigate away during deletion."});var e=E.deletion.errors,n=Object.keys(e).length,t=E.deletion.completed-n;return(0,v.jsxs)(u.Z,{direction:"column",spacing:8,children:[t?(0,v.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,v.jsx)(p.JO,{name:"check_circle",color:h.w.Green500}),(0,v.jsx)("div",{children:"Successfully deleted ".concat(t," ").concat(1===t?"run":"runs",".")})]}):null,n?(0,v.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,v.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,v.jsx)(p.JO,{name:"warning",color:h.w.Yellow500}),(0,v.jsx)("div",{children:"Could not delete ".concat(n," ").concat(1===n?"run":"runs",".")})]}),(0,v.jsx)("ul",{children:Object.keys(e).map((function(n){var t;return(0,v.jsx)("li",{children:(0,v.jsxs)(u.Z,{direction:"row",spacing:8,children:[(0,v.jsx)(x.fv,{children:n.slice(0,8)}),e[n]?(0,v.jsx)("div",{children:null===(t=e[n])||void 0===t?void 0:t.message}):null]})},n)}))})]}):null]})}()]})}),(0,v.jsx)(m.cN,{children:function(){switch(E.step){case"initial":return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.zx,{intent:"none",onClick:t,children:"Cancel"}),(0,v.jsx)(d.zx,{intent:"danger",onClick:P,children:"Yes, delete ".concat("".concat(N," ").concat(1===N?"run":"runs"))}),A?(0,v.jsx)(d.zx,{intent:"primary",onClick:c,children:"Terminate ".concat("".concat(A," ").concat(1===A?"run":"runs")," instead")}):null]});case"deleting":return(0,v.jsx)(d.zx,{intent:"danger",disabled:!0,children:"Deleting\u2026"});case"completed":return(0,v.jsx)(d.zx,{intent:"primary",onClick:t,children:"Done"})}}()})]})}},78222:function(e,n,t){t.d(n,{c:function(){return s}});var r=t(78193),i=t(50032),o=t(35936),s=function(e){return r.useEffect((function(){var e=function(e){e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[]),(0,o.jsx)(i.NL,{message:e.message})}},76627:function(e,n,t){t.d(n,{F:function(){return m}});var r,i,o=t(71171),s=t(90239),c=t(31623),a=t(40302),l=t(83796),u=(t(78193),t(97412)),d=t(60319),p=t(72885),h=t(18213),x=t(35936),m=function(e){var n=e.runId,t=(0,s.a)(f,{variables:{runId:n}});if(t.loading||!t.data)return(0,x.jsx)(g,{children:(0,x.jsx)(a.x,{padding:24,flex:{justifyContent:"center"},children:(0,x.jsx)(l.$,{purpose:"section"})})});var r=t.data.pipelineRunOrError;if("Run"!==r.__typename)return(0,x.jsx)(h.T9,{error:r});if("RunStatsSnapshot"!==r.stats.__typename)return(0,x.jsx)(h.T9,{error:r.stats});var i="/runs/".concat(n);return(0,x.jsxs)(g,{children:[(0,x.jsx)(u.rU,{to:"".concat(i,"?logs=type:STEP_SUCCESS"),children:"".concat(r.stats.stepsSucceeded," steps succeeded")}),(0,x.jsx)(u.rU,{to:"".concat(i,"?logs=type:STEP_FAILURE"),children:"".concat(r.stats.stepsFailed," steps failed")}),(0,x.jsx)(u.rU,{to:"".concat(i,"?logs=type:ASSET_MATERIALIZATION"),children:"".concat(r.stats.materializations," materializations")}),(0,x.jsx)(u.rU,{to:"".concat(i,"?logs=type:STEP_EXPECTATION_RESULT"),children:"".concat(r.stats.expectations," expectations passed")})]})},f=(0,c.Ps)(r||(r=(0,o.Z)(["\n  query RunStatsQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on RunNotFoundError {\n        message\n      }\n      ... on Run {\n        id\n        pipelineName\n        stats {\n          ... on RunStatsSnapshot {\n            id\n            stepsSucceeded\n            stepsFailed\n            expectations\n            materializations\n          }\n          ...PythonErrorFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"])),p.B),g=d.ZP.div(i||(i=(0,o.Z)(["\n  min-width: 200px;\n  padding: 12px;\n  color: white;\n  font-size: 12px;\n  & > a {\n    display: block;\n  }\n"])))},30597:function(e,n,t){t.d(n,{K9:function(){return v},O_:function(){return w},hk:function(){return j}});var r,i,o,s=t(71171),c=t(33028),a=t(59740),l=t(15888),u=t(83796),d=t(78193),p=t(60319),h=t(76627),x=t(73354),m=t(44355),f=t(35936),g=["runId"],j=d.memo((function(e){var n=e.runId,t=(0,a.Z)(e,g);return(0,f.jsx)(l.J,{position:"bottom",interactionKind:"hover",content:(0,f.jsx)(h.F,{runId:n}),hoverOpenDelay:100,children:(0,f.jsx)(v,(0,c.Z)({},t))})})),v=d.memo((function(e){var n=e.status,t=e.size;return"STARTED"===n||"CANCELING"===n?(0,f.jsx)(u.$,{purpose:"caption-text"}):"SCHEDULED"===n?(0,f.jsx)(w,{status:n,size:t||12}):(0,f.jsx)(w,{status:n,size:t||12,pulse:m.Ys.has(n)||m.sy.has(n)})})),y=(0,p.F4)(r||(r=(0,s.Z)(["\n  0% {\n    filter: brightness(1);\n  }\n\n  50% {\n    filter: brightness(0.7);\n  }\n\n  100% {\n    filter: brightness(1);\n  }\n"]))),w=p.ZP.div(i||(i=(0,s.Z)(["\n  width: ","px;\n  height: ","px;\n  border-radius: ","px;\n  transition: filter 200ms linear;\n  ","\n\n  background: ",";\n  &:hover {\n    animation: none;\n    filter: brightness(0.7);\n  }\n"])),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.size/2}),(function(e){return e.pulse?(0,p.iv)(o||(o=(0,s.Z)(["\n          animation: "," 2s infinite;\n        "])),y):null}),(function(e){var n=e.status;return x.YM[n]}))},73354:function(e,n,t){t.d(n,{KG:function(){return g},M9:function(){return v},YM:function(){return f},Zr:function(){return j},fi:function(){return m}});var r=t(69059),i=t(48439),o=t(40302),s=t(99600),c=t(15888),a=(t(78193),t(58035)),l=t(4534),u=t(76627),d=t(30597),p=t(35936),h=function(e){switch(e){case l.VOA.QUEUED:case l.VOA.NOT_STARTED:case l.VOA.CANCELED:case l.VOA.MANAGED:return"none";case l.VOA.SUCCESS:return"success";case l.VOA.FAILURE:return"danger";case l.VOA.STARTING:case l.VOA.STARTED:case l.VOA.CANCELING:return"primary";default:return(0,a.UT)(e)}},x=function(e){switch(e){case l.VOA.QUEUED:return"Queued";case l.VOA.SUCCESS:return"Success";case l.VOA.STARTING:return"Starting";case l.VOA.NOT_STARTED:return"Not started";case l.VOA.FAILURE:return"Failure";case l.VOA.STARTED:return"Started";case l.VOA.MANAGED:return"Managed";case l.VOA.CANCELING:return"Canceling";case l.VOA.CANCELED:return"Canceled";default:return(0,a.UT)(e)}},m=function(e){switch(e){case l.VOA.CANCELED:return"Canceled";case l.VOA.CANCELING:return"Canceling";case l.VOA.FAILURE:return"Failed";case l.VOA.STARTING:case l.VOA.STARTED:return"In progress";case l.VOA.QUEUED:return"Queued";case l.VOA.SUCCESS:return"Completed";case l.VOA.MANAGED:case l.VOA.NOT_STARTED:return"Missing";default:return(0,a.UT)(e)}},f={QUEUED:r.w.Blue200,NOT_STARTED:r.w.Gray600,MANAGED:r.w.Gray400,STARTED:r.w.Blue500,STARTING:r.w.Blue500,CANCELING:r.w.Blue500,SUCCESS:r.w.Green500,FAILURE:r.w.Red500,CANCELED:r.w.Gray400,SCHEDULED:r.w.Blue200},g=function(e){var n=e.status;return(0,p.jsx)(i.V,{intent:h(n),children:(0,p.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,p.jsx)(d.K9,{status:n,size:10}),(0,p.jsx)("div",{children:x(n)})]})})},j=function(e){var n=e.runId,t=e.status;return(0,p.jsx)(i.V,{intent:h(t),children:(0,p.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,p.jsx)(d.K9,{status:t,size:10}),(0,p.jsx)(s.aU,{children:n.slice(0,8)})]})})},v=function(e){var n=e.runId,t=e.status;return(0,p.jsx)(c.J,{position:"bottom-left",interactionKind:"hover",content:(0,p.jsx)(u.F,{runId:n}),hoverOpenDelay:100,usePortal:!0,children:(0,p.jsx)(g,{status:t})})}},25722:function(e,n,t){t.d(n,{ZZ:function(){return Ae},AL:function(){return Te}});var r,i,o,s,c,a,l,u=t(71171),d=t(96234),p=t(31623),h=t(40302),x=t(34943),m=t(83421),f=t(36318),g=t(14957),j=t(99600),v=t(48439),y=t(69059),w=t(94412),C=t(58760),Z=t(16854),b=t(85049),k=t(78193),R=t(97412),E=t(60319),O=t(87734),T=t(14581),N=t(23028),A=t(25646),I=t(18284),S=t(54860),P=t(29498),z=t(8512),_=t(56666),D=t(32723),F=t(34795),L=t(33028),V=t(15541),U=t(44719),M=t(15888),G=t(72979),J=t(34191),K=t(73619),H=t(50032),B=t(72593),q=t(52232),Y=t(14762),Q=t(31362),$=t(4534),W=t(66608),X=t(54577),ee=t(39928),ne=t(16365),te=t(36355),re=t(60864),ie=t(49668),oe=t(78222),se=t(43371),ce=t(35936),ae=function(e){if("LaunchRunSuccess"===(null===e||void 0===e?void 0:e.launchPipelineReexecution.__typename))throw new Error("Not an error!");return null===e||void 0===e?void 0:e.launchPipelineReexecution},le=function(e){if(!e)return"Unknown error";switch(e.__typename){case"ConflictingExecutionParamsError":return"Conflicting execution parameters";case"InvalidOutputError":return"Invalid output";case"InvalidStepError":return"Invalid step";case"NoModeProvidedError":return"No mode provided";case"PipelineNotFoundError":return"Job not found in workspace";case"PresetNotFoundError":return"Preset not found";case"PythonError":return e.message;case"RunConfigValidationInvalid":return"Run config invalid";case"RunConflict":return"Run conflict";case"UnauthorizedError":return"Re-execution not authorized";case"InvalidSubsetError":return"Invalid op subset: "+e.message;default:return"Unknown error"}},ue=function(e){return{frozenRuns:e,step:"initial",reexecution:{completed:0,errors:{}}}},de=function(e,n){switch(n.type){case"reset":return ue(n.frozenRuns);case"start":return(0,L.Z)((0,L.Z)({},e),{},{step:"reexecuting"});case"reexecution-success":var t=e.reexecution;return(0,L.Z)((0,L.Z)({},e),{},{step:"reexecuting",reexecution:(0,L.Z)((0,L.Z)({},t),{},{completed:t.completed+1})});case"reexecution-error":var r=e.reexecution;return(0,L.Z)((0,L.Z)({},e),{},{step:"reexecuting",reexecution:(0,L.Z)((0,L.Z)({},r),{},{completed:r.completed+1,errors:(0,L.Z)((0,L.Z)({},r.errors),{},(0,_.Z)({},n.id,n.error))})});case"complete":return(0,L.Z)((0,L.Z)({},e),{},{step:"completed"})}},pe=function(e){var n=e.isOpen,t=e.onClose,r=e.onComplete,i=e.reexecutionStrategy,o=e.selectedRuns,s=k.useRef(o),c=k.useReducer(de,s.current,ue),a=(0,d.Z)(c,2),l=a[0],u=a[1],p=Object.keys(l.frozenRuns).length;k.useEffect((function(){n&&u({type:"reset",frozenRuns:s.current})}),[n]),k.useEffect((function(){n||(s.current=o)}),[n,o]);var h=(0,V.D)(se.kO),x=(0,d.Z)(h,1)[0],f=function(){var e=(0,F.Z)((0,D.Z)().mark((function e(){var n,t,o,s,c,a;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u({type:"start"}),n=Object.keys(l.frozenRuns),t=0,o=n;case 3:if(!(t<o.length)){e.next=13;break}return s=o[t],e.next=7,x({variables:{reexecutionParams:{parentRunId:s,strategy:i}}});case 7:c=e.sent,"LaunchRunSuccess"===(null===(a=c.data)||void 0===a?void 0:a.launchPipelineReexecution.__typename)?u({type:"reexecution-success"}):u({type:"reexecution-error",id:s,error:ae(a)});case 10:t++,e.next=3;break;case 13:u({type:"complete"}),r(l.reexecution);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g="reexecuting"!==l.step;return(0,ce.jsxs)(Z.Vq,{isOpen:n,title:i===$.hmq.ALL_STEPS?"Re-execute runs":"Re-execute runs from failure",canEscapeKeyClose:g,canOutsideClickClose:g,onClose:t,children:[(0,ce.jsx)(Z.a7,{children:(0,ce.jsxs)(ie.Z,{direction:"column",spacing:24,children:[function(){switch(l.step){case"initial":if(!p)return(0,ce.jsxs)(ie.Z,{direction:"column",spacing:16,children:[(0,ce.jsx)("div",{children:"No runs selected for re-execution."}),(0,ce.jsx)("div",{children:"The runs you selected may already have finished executing."})]});return(0,ce.jsx)(ie.Z,{direction:"column",spacing:16,children:(0,ce.jsx)("div",{children:i===$.hmq.ALL_STEPS?(0,ce.jsxs)("span",{children:["".concat(p," ").concat(1===p?"run":"runs"," will be re-executed "),(0,ce.jsx)("strong",{children:"with all steps"}),". Do you wish to continue?"]}):(0,ce.jsxs)("span",{children:["".concat(p," ").concat(1===p?"run":"runs"," will be re-executed "),(0,ce.jsx)("strong",{children:"from failure"}),". Do you wish to continue?"]})})});case"reexecuting":case"completed":var e=p>0?l.reexecution.completed/p:1;return(0,ce.jsxs)(ie.Z,{direction:"column",spacing:8,children:[(0,ce.jsx)(re.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"reexecuting"===l.step?(0,ce.jsx)(oe.c,{message:"Re-execution in progress, please do not navigate away yet."}):null]});default:return null}}(),function(){if("initial"===l.step)return null;if("reexecuting"===l.step)return(0,ce.jsx)("div",{children:"Please do not close the window or navigate away during re-execution."});var e=l.reexecution.errors,n=Object.keys(e).length,t=l.reexecution.completed-n;return(0,ce.jsxs)(ie.Z,{direction:"column",spacing:8,children:[t?(0,ce.jsxs)(ie.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,ce.jsx)(m.JO,{name:"check_circle",color:y.w.Green500}),(0,ce.jsx)("div",{children:"Successfully requested re-execution for ".concat(t," ").concat(1===t?"run":"runs",".")})]}):null,n?(0,ce.jsxs)(ie.Z,{direction:"column",spacing:8,children:[(0,ce.jsxs)(ie.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,ce.jsx)(m.JO,{name:"warning",color:y.w.Yellow500}),(0,ce.jsx)("div",{children:"Could not request re-execution for ".concat(n," ").concat(1===n?"run":"runs",":")})]}),(0,ce.jsx)("ul",{children:Object.keys(e).map((function(n){return(0,ce.jsx)("li",{children:(0,ce.jsxs)(ie.Z,{direction:"row",spacing:8,alignItems:"baseline",children:[(0,ce.jsx)(j.fv,{children:n.slice(0,8)}),e[n]?(0,ce.jsx)("div",{children:le(e[n])}):null]})},n)}))})]}):null]})}()]})}),(0,ce.jsx)(Z.cN,{children:function(){switch(l.step){case"initial":return p?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(b.zx,{intent:"none",onClick:t,children:"Cancel"}),(0,ce.jsx)(b.zx,{intent:"primary",onClick:f,children:"Re-execute ".concat("".concat(p," ").concat(1===p?"run":"runs"))})]}):(0,ce.jsx)(b.zx,{intent:"none",onClick:t,children:"OK"});case"reexecuting":return(0,ce.jsx)(b.zx,{intent:"primary",disabled:!0,children:"Re-executing ".concat("".concat(p," ").concat(1===p?"run":"runs","..."))});case"completed":return(0,ce.jsx)(b.zx,{intent:"primary",onClick:t,children:"Done"})}}()})]})},he=t(44355),xe=t(24095),me=t(97298),fe=t(16483),ge=k.memo((function(e){var n,t=e.run,r=e.onAddTag,i=e.additionalActionsForRun,o=k.useContext(se.Lw).refetch,s=k.useState("none"),c=(0,d.Z)(s,2),a=c[0],l=c[1],u=k.useContext(B.I).rootServerURI,p=(0,H.k6)(),x=(0,Q.m)(),f=(0,V.D)(se.kO,{onCompleted:o}),g=(0,d.Z)(f,1)[0],j=(0,U.t)(ye,{variables:{runId:t.id}}),v=(0,d.Z)(j,2),y=v[0],w=v[1],C=w.called,R=w.loading,E=w.data,O=function(){l("none")},T=function(){o()},N="Run"===(null===E||void 0===E||null===(n=E.pipelineRunOrError)||void 0===n?void 0:n.__typename)?null===E||void 0===E?void 0:E.pipelineRunOrError:null,A=null===N||void 0===N?void 0:N.runConfigYaml,z=(0,S.n)(N),$=(0,fe.J)((0,L.Z)((0,L.Z)({},t),{},{parentPipelineSnapshotId:null===N||void 0===N?void 0:N.parentPipelineSnapshotId})),re=he.cv.has(t.status),ie=!(!z||!(0,ne.E8)(null===z||void 0===z?void 0:z.match,t.pipelineName)),oe=!!C&&!R,ae=k.useMemo((function(){return t.hasReExecutePermission?$?{disabled:$.disabled,message:$.tooltip}:oe?{disabled:!1}:{disabled:!0}:{disabled:!0,message:Y.Qr}}),[t.hasReExecutePermission,$,oe]);return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(b.zH,{children:[(0,ce.jsx)(I.A,{to:"/runs/".concat(t.id),children:"View run"}),(0,ce.jsx)(M.J,{content:(0,ce.jsxs)(G.v2,{children:[(0,ce.jsx)(G.sN,{tagName:"button",text:R?"Loading configuration...":"View configuration...",disabled:!A,icon:"open_in_new",onClick:function(){return l("config")}}),(0,ce.jsx)(G.sN,{tagName:"button",text:(0,ce.jsxs)("div",{style:{display:"contents"},children:["View all tags",(0,ce.jsx)(h.x,{flex:{justifyContent:"center",alignItems:"center",display:"inline-flex"},padding:{horizontal:8},children:(0,ce.jsx)(we,{children:"t"})})]}),icon:"tag",onClick:function(){return l("tags")}}),t.pipelineSnapshotId?(0,ce.jsx)(Ce,{to:(0,X.sS)(t.pipelineName,t.pipelineSnapshotId),children:(0,ce.jsx)(G.sN,{tagName:"button",icon:"job",text:"View snapshot",onClick:function(){return l("tags")}})}):null,(0,ce.jsx)(G.R,{}),(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(J.u,{content:t.hasReExecutePermission?ve:W.U,position:"left",disabled:oe&&t.hasReExecutePermission,targetTagName:"div",children:(0,ce.jsx)(ee.U,{text:"Open in Launchpad...",disabled:!oe||!t.hasReExecutePermission,icon:"edit",to:(0,P.$O)({id:t.id,pipelineName:t.pipelineName,repositoryName:null===z||void 0===z?void 0:z.match.repository.name,repositoryLocationName:null===z||void 0===z?void 0:z.match.repositoryLocation.name,isJob:ie})})}),(0,ce.jsx)(J.u,{content:ae.message||"",position:"left",canShow:ae.disabled,targetTagName:"div",children:(0,ce.jsx)(G.sN,{tagName:"button",text:"Re-execute",disabled:ae.disabled,icon:"refresh",onClick:(0,F.Z)((0,D.Z)().mark((function e(){var n,r;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z||!A){e.next=5;break}return e.next=3,g({variables:(0,se.kz)({run:(0,L.Z)((0,L.Z)({},t),{},{runConfigYaml:A}),style:{type:"all"},repositoryLocationName:z.match.repositoryLocation.name,repositoryName:z.match.repository.name})});case 3:r=e.sent,(0,se.lF)(t.pipelineName,null===(n=r.data)||void 0===n?void 0:n.launchPipelineReexecution,p,{behavior:"open"});case 5:case"end":return e.stop()}}),e)})))})}),re||!t.hasTerminatePermission?null:(0,ce.jsx)(G.sN,{tagName:"button",icon:"cancel",text:"Terminate",onClick:function(){return l("terminate")}}),null===i||void 0===i?void 0:i(t),(0,ce.jsx)(G.R,{})]}),(0,ce.jsx)(G.AL,{text:"Download debug file",icon:"download_for_offline",download:!0,href:"".concat(u,"/download_debug/").concat(t.id)}),t.hasDeletePermission?(0,ce.jsx)(G.sN,{tagName:"button",icon:"delete",text:"Delete",intent:"danger",onClick:function(){return l("delete")}}):null]}),position:"bottom-right",onOpening:function(){C||y()},children:(0,ce.jsx)(b.zx,{icon:(0,ce.jsx)(m.JO,{name:"expand_more"})})})]}),t.hasTerminatePermission?(0,ce.jsx)(me.A,{isOpen:"terminate"===a,onClose:O,onComplete:T,selectedRuns:(0,_.Z)({},t.id,t.canTerminate)}):null,t.hasDeletePermission?(0,ce.jsx)(te.N,{isOpen:"delete"===a,onClose:O,onComplete:T,onTerminateInstead:function(){return l("terminate")},selectedRuns:(0,_.Z)({},t.id,t.canTerminate)}):null,(0,ce.jsxs)(Z.Vq,{isOpen:"tags"===a,title:"Tags",canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:O,children:[(0,ce.jsx)(Z.a7,{children:(0,ce.jsx)(xe.Q,{tags:t.tags,mode:ie?"default"!==t.mode?t.mode:null:t.mode,onAddTag:r})}),(0,ce.jsx)(Z.cN,{topBorder:!0,children:(0,ce.jsx)(b.zx,{intent:"primary",onClick:O,children:"Close"})})]}),(0,ce.jsxs)(Z.Vq,{isOpen:"config"===a,title:"Config",canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:O,children:[(0,ce.jsx)(K.NU,{value:A||"",options:{lineNumbers:!0,mode:"yaml"}}),(0,ce.jsxs)(Z.cN,{topBorder:!0,children:[(0,ce.jsx)(b.zx,{intent:"none",onClick:(0,F.Z)((0,D.Z)().mark((function e(){return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(A||""),e.next=3,(0,q.B7)({intent:"success",icon:"copy_to_clipboard_done",message:"Copied!"});case 3:case"end":return e.stop()}}),e)}))),children:"Copy config"}),(0,ce.jsx)(b.zx,{intent:"primary",onClick:O,children:"OK"})]})]})]})})),je=k.memo((function(e){var n=e.selected,t=e.clearSelection,r=k.useContext(se.Lw).refetch,i=k.useState("none"),o=(0,d.Z)(i,2),s=o[0],c=o[1],a=k.useMemo((function(){return n.some((function(e){return e.hasTerminatePermission}))}),[n]),l=k.useMemo((function(){return n.some((function(e){return e.hasTerminatePermission}))}),[n]),u=k.useMemo((function(){return n.some((function(e){return e.hasReExecutePermission}))}),[n]),p=!a&&!l,h=n.filter((function(e){return!he.cv.has(null===e||void 0===e?void 0:e.status)&&e.hasTerminatePermission})),x=h.map((function(e){return e.id})),f=h.reduce((function(e,n){return(0,L.Z)((0,L.Z)({},e),{},(0,_.Z)({},n.id,n.canTerminate))}),{}),g=n.map((function(e){return e.id})),j=n.reduce((function(e,n){return(0,L.Z)((0,L.Z)({},e),{},(0,_.Z)({},n.id,n.canTerminate))}),{}),v=n.filter((function(e){return he.hd.has(null===e||void 0===e?void 0:e.status)&&e.hasReExecutePermission})),y=v.reduce((function(e,n){return(0,L.Z)((0,L.Z)({},e),{},(0,_.Z)({},n.id,n.id))}),{}),w=n.filter((function(e){return he.cv.has(null===e||void 0===e?void 0:e.status)&&e.hasReExecutePermission})),C=w.reduce((function(e,n){return(0,L.Z)((0,L.Z)({},e),{},(0,_.Z)({},n.id,n.id))}),{}),Z=function(){c("none")},R=function(){t(),r()};return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(M.J,{disabled:p||0===n.length,content:(0,ce.jsxs)(G.v2,{children:[a?(0,ce.jsx)(G.sN,{icon:"cancel",text:"Terminate ".concat(x.length," ").concat(1===x.length?"run":"runs"),disabled:0===x.length,onClick:function(){c("terminate")}}):null,l?(0,ce.jsx)(G.sN,{icon:"delete",intent:"danger",text:"Delete ".concat(g.length," ").concat(1===g.length?"run":"runs"),disabled:0===g.length,onClick:function(){c("delete")}}):null,u?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(G.sN,{icon:"refresh",text:"Re-execute ".concat(w.length," ").concat(1===w.length?"run":"runs"),disabled:0===w.length,onClick:function(){c("reexecute")}}),(0,ce.jsx)(G.sN,{icon:"refresh",text:"Re-execute ".concat(v.length," ").concat(1===v.length?"run":"runs"," from failure"),disabled:0===v.length,onClick:function(){c("reexecute-from-failure")}})]}):null]}),position:"bottom-right",children:(0,ce.jsx)(b.zx,{disabled:p||0===n.length,rightIcon:(0,ce.jsx)(m.JO,{name:"expand_more"}),intent:"primary",children:"Actions"})}),(0,ce.jsx)(me.A,{isOpen:"terminate"===s,onClose:Z,onComplete:R,selectedRuns:f}),(0,ce.jsx)(te.N,{isOpen:"delete"===s,onClose:Z,onComplete:R,onTerminateInstead:function(){return c("terminate")},selectedRuns:j}),(0,ce.jsx)(pe,{isOpen:"reexecute-from-failure"===s,onClose:Z,onComplete:R,selectedRuns:y,reexecutionStrategy:$.hmq.FROM_FAILURE}),(0,ce.jsx)(pe,{isOpen:"reexecute"===s,onClose:Z,onComplete:R,selectedRuns:C,reexecutionStrategy:$.hmq.ALL_STEPS})]})})),ve="Launchpad is unavailable because the pipeline is not present in the current repository.",ye=(0,p.Ps)(r||(r=(0,u.Z)(["\n  query PipelineEnvironmentQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        pipelineName\n        pipelineSnapshotId\n        runConfigYaml\n        pipelineName\n        parentPipelineSnapshotId\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n      }\n    }\n  }\n"]))),we=E.ZP.div(i||(i=(0,u.Z)(["\n  border-radius: 4px;\n  padding: 0px 6px;\n  background: ",";\n  color: ",";\n"])),y.w.Gray100,y.w.Gray500),Ce=(0,E.ZP)(R.rU)(o||(o=(0,u.Z)(["\n  text-decoration: none !important;\n"]))),Ze=t(97621),be=t(52141),ke=k.memo((function(e){var n=e.tags;return(0,ce.jsx)(h.x,{flex:{direction:"column",alignItems:"flex-start"},children:(0,ce.jsx)(Re,{tags:n})})})),Re=function(e){var n=e.tags,t=(0,Ze.C)().UserDisplay,r=n.find((function(e){return e.key===be.H.User}));if(r)return(0,ce.jsx)(t,{email:r.value});var i=n.find((function(e){return e.key===be.H.ScheduleName}));if(i)return(0,ce.jsx)(v.V,{icon:"schedule",children:i.value});var o=n.find((function(e){return e.key===be.H.SensorName}));return o?(0,ce.jsx)(v.V,{icon:"sensors",children:o.value}):n.some((function(e){return e.key===be.H.Automaterialize||e.key===be.H.CreatedBy&&"auto_materialize"===e.value}))?(0,ce.jsx)(v.V,{icon:"auto_materialize_policy",children:"Auto-materialize policy"}):n.some((function(e){return e.key===be.H.AutoObserve}))?(0,ce.jsx)(v.V,{icon:"auto_observe",children:"Auto-observation"}):(0,ce.jsx)(v.V,{icon:"account_circle",children:"Manually launched"})},Ee=t(73354),Oe=t(9251),Te=function(e){var n=e.runs,t=e.filter,r=e.onAddTag,i=e.highlightedIds,o=e.actionBarComponents,s=e.belowActionBarComponents,c=e.hideCreatedBy,a=e.emptyState,l=n.map((function(e){return e.id})),u=(0,N.a)(l),p=(0,d.Z)(u,2),j=p[0].checkedIds,v=p[1],y=v.onToggleFactory,w=v.onToggleAll,C=k.useMemo((function(){return n.some((function(e){return e.hasTerminatePermission||e.hasDeletePermission}))}),[n]);var Z=n.filter((function(e){return j.has(e.id)}));return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(Pe,{top:(0,ce.jsxs)(h.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center",grow:1},children:[o,(0,ce.jsx)(je,{selected:Z,clearSelection:function(){return w(!1)}})]}),bottom:s}),function(){if(0===n.length){var o=!!Object.keys(t||{}).length;return a?(0,ce.jsx)(ce.Fragment,{children:a()}):(0,ce.jsx)("div",{children:(0,ce.jsx)(h.x,{margin:{vertical:32},children:o?(0,ce.jsx)(x.t,{icon:"run",title:"No matching runs",description:"No runs were found for this filter."}):(0,ce.jsx)(x.t,{icon:"run",title:"No runs found",description:(0,ce.jsxs)(h.x,{flex:{direction:"column",gap:12},children:[(0,ce.jsx)("div",{children:"You have not launched any runs yet."}),(0,ce.jsxs)(h.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,ce.jsx)(I.A,{icon:(0,ce.jsx)(m.JO,{name:"add_circle"}),to:"/overview/jobs",children:"Launch a run"}),(0,ce.jsx)("span",{children:"or"}),(0,ce.jsx)(I.A,{icon:(0,ce.jsx)(m.JO,{name:"materialization"}),to:"/asset-groups",children:"Materialize an asset"})]})]})})})})}return(0,ce.jsxs)(f.i,{children:[(0,ce.jsx)("thead",{children:(0,ce.jsxs)("tr",{children:[C?(0,ce.jsx)("th",{style:{width:42,paddingTop:0,paddingBottom:0},children:(0,ce.jsx)(g.X,{indeterminate:j.size>0&&j.size!==n.length,checked:j.size===n.length,onChange:function(e){e.target instanceof HTMLInputElement&&w(e.target.checked)}})}):null,(0,ce.jsx)("th",{style:{width:90},children:"Run ID"}),(0,ce.jsx)("th",{style:{width:180},children:"Created date"}),(0,ce.jsx)("th",{children:"Target"}),c?null:(0,ce.jsx)("th",{style:{width:160},children:"Launched by"}),(0,ce.jsx)("th",{style:{width:120},children:"Status"}),(0,ce.jsx)("th",{style:{width:190},children:"Duration"}),e.additionalColumnHeaders,(0,ce.jsx)("th",{style:{width:52}})]})}),(0,ce.jsx)("tbody",{children:n.map((function(n){var t;return(0,ce.jsx)(Ie,{canTerminateOrDelete:n.hasTerminatePermission||n.hasDeletePermission,run:n,onAddTag:r,checked:j.has(n.id),additionalColumns:null===(t=e.additionalColumnsForRow)||void 0===t?void 0:t.call(e,n),additionalActionsForRun:e.additionalActionsForRun,onToggleChecked:y(n.id),isHighlighted:i&&i.includes(n.id),hideCreatedBy:c},n.id)}))})]})}()]})},Ne=(0,p.Ps)(s||(s=(0,u.Z)(["\n  fragment RunTagsFragment on PipelineTag {\n    key\n    value\n  }\n"]))),Ae=(0,p.Ps)(c||(c=(0,u.Z)(["\n  fragment RunTableRunFragment on Run {\n    id\n    status\n    stepKeysToExecute\n    canTerminate\n    hasReExecutePermission\n    hasTerminatePermission\n    hasDeletePermission\n    mode\n    rootRunId\n    parentRunId\n    pipelineSnapshotId\n    pipelineName\n    repositoryOrigin {\n      id\n      repositoryName\n      repositoryLocationName\n    }\n    solidSelection\n    assetSelection {\n      ... on AssetKey {\n        path\n      }\n    }\n    status\n    tags {\n      ...RunTagsFragment\n    }\n    ...RunTimeFragment\n  }\n\n  ","\n  ","\n"])),se.$X,Ne),Ie=function(e){var n,t=e.run,r=e.canTerminateOrDelete,i=e.onAddTag,o=e.checked,s=e.onToggleChecked,c=e.additionalColumns,a=e.additionalActionsForRun,l=e.isHighlighted,u=e.hideCreatedBy,p=t.pipelineName,x=(0,S.r)(t),f=k.useMemo((function(){if(x){var e=x.match.repository.pipelines.find((function(e){return e.name===p}));return!(null===e||void 0===e||!e.isJob)}return!1}),[x,p]),E=t.tags.some((function(e){return e.key===be.H.ParentRunId})),N=t.tags.find((function(e){return e.key===be.H.Backfill})),I=t.tags.find((function(e){return e.key===be.H.Partition})),_=t.tags.find((function(e){return e.key===be.H.PartitionSet})),D=t.tags.find((function(e){return e.key===be.H.AssetPartitionRangeStart})),F=t.tags.find((function(e){return e.key===be.H.AssetPartitionRangeEnd})),L=k.useState(!1),V=(0,d.Z)(L,2),U=V[0],M=V[1],G=k.useState(!1),J=(0,d.Z)(G,2),K=J[0],H=J[1],B=k.useMemo((function(){var e=[];if(N){var n,r=null!==(n=t.assetSelection)&&void 0!==n&&n.length?"/overview/backfills/".concat(N.value):(0,Oe.it)([{token:"tag",value:"".concat(be.H.Backfill,"=").concat(N.value)}]);e.push({key:N.key,value:N.value,link:r})}return I?e.push(I):_?e.push(_):void 0!==D&&void 0!==F&&e.push(D,F),e}),[null===(n=t.assetSelection)||void 0===n?void 0:n.length,N,I,F,D,_]);return(0,ce.jsxs)(Se,{highlighted:!!l,onMouseEnter:function(){H(!0)},onMouseLeave:function(){H(!1)},children:[r?(0,ce.jsx)("td",{children:s?(0,ce.jsx)(g.X,{checked:!!o,onChange:function(e){if(e.target instanceof HTMLInputElement){var n=e.target.checked,t=e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift");s&&s({checked:n,shiftKey:t})}}}):null}):null,(0,ce.jsx)("td",{children:(0,ce.jsx)(R.rU,{to:"/runs/".concat(t.id),children:(0,ce.jsx)(j.fv,{children:(0,se.EI)(t)})})}),(0,ce.jsx)("td",{children:(0,ce.jsxs)(h.x,{flex:{direction:"column",gap:4},children:[(0,ce.jsx)(se.Zr,{run:t}),E?(0,ce.jsx)("div",{children:(0,ce.jsx)(v.V,{icon:"cached",children:"Re-execution"})}):null]})}),(0,ce.jsxs)("td",{style:{position:"relative"},children:[(0,ce.jsxs)(h.x,{flex:{direction:"column",gap:5},children:[(0,T.pv)(t.pipelineName)?(0,ce.jsx)(z.m,{assetKeys:(0,se.Bo)(t)}):(0,ce.jsxs)(h.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,ce.jsx)(A.h,{isJob:f,showIcon:!0,pipelineName:t.pipelineName,pipelineHrefContext:"no-link"}),(0,ce.jsx)(R.rU,{to:x?(0,P.jT)({repoName:x.match.repository.name,repoLocation:x.match.repositoryLocation.name,pipelineName:t.pipelineName,isJob:f}):(0,P.r4)(t.pipelineName),target:"_blank",children:(0,ce.jsx)(m.JO,{name:"open_in_new",color:y.w.Blue500})})]}),(0,ce.jsxs)(h.x,{flex:{direction:"row",gap:8,wrap:"wrap"},children:[t.tags.length?(0,ce.jsx)(h.x,{children:(0,ce.jsx)(w.m,{fillColor:y.w.Gray100,label:(0,ce.jsxs)(C.Z,{onClick:function(){M(!0)},children:[t.tags.length," tag",1===t.tags.length?"":"s"]})})}):null,(0,ce.jsx)(ze,{children:B.length?(0,ce.jsx)(xe.Q,{tags:B,mode:f?"default"!==t.mode?t.mode:null:t.mode,onAddTag:i}):null})]})]}),K&&t.tags.length?(0,ce.jsx)(O.b,{onShortcut:function(){M((function(e){return!e}))},shortcutLabel:"t",shortcutFilter:function(e){return"KeyT"===e.code},children:null},"runtabletags"):null]}),u?null:(0,ce.jsx)("td",{children:(0,ce.jsx)(ke,{tags:t.tags||[]})}),(0,ce.jsx)("td",{children:(0,ce.jsx)(Ee.M9,{status:t.status,runId:t.id})}),(0,ce.jsx)("td",{children:(0,ce.jsx)(se.Tw,{run:t})}),c,(0,ce.jsx)("td",{children:(0,ce.jsx)(ge,{run:t,onAddTag:i,additionalActionsForRun:a})}),(0,ce.jsxs)(Z.Vq,{isOpen:U,title:"Tags",canOutsideClickClose:!0,canEscapeKeyClose:!0,onClose:function(){M(!1)},children:[(0,ce.jsx)(Z.a7,{children:(0,ce.jsx)(xe.Q,{tags:t.tags,mode:f?"default"!==t.mode?t.mode:null:t.mode,onAddTag:i})}),(0,ce.jsx)(Z.cN,{topBorder:!0,children:(0,ce.jsx)(b.zx,{intent:"primary",onClick:function(){M(!1)},children:"Close"})})]})]})},Se=E.ZP.tr(a||(a=(0,u.Z)(["\n  ","\n"])),(function(e){return e.highlighted?"box-shadow: inset 3px 3px #bfccd6, inset -3px -3px #bfccd6;":null}));function Pe(e){var n=e.top,t=e.bottom;return(0,ce.jsxs)(h.x,{flex:{direction:"column"},padding:{vertical:12},children:[(0,ce.jsx)(h.x,{flex:{alignItems:"center",gap:12},padding:{left:24,right:24},children:n}),t?(0,ce.jsx)(h.x,{margin:{top:12},padding:{left:24,right:12,top:8},border:{side:"top",width:1,color:y.w.KeylineGray},flex:{gap:8},children:t}):null]})}var ze=E.ZP.div(l||(l=(0,u.Z)(["\n  display: contents;\n  > * {\n    display: contents;\n  }\n"])))},97298:function(e,n,t){t.d(n,{A:function(){return R}});var r=t(32723),i=t(34795),o=t(96234),s=t(56666),c=t(33028),a=t(15541),l=t(60864),u=t(49668),d=t(14957),p=t(40302),h=t(83421),x=t(69059),m=t(85049),f=t(99600),g=t(16854),j=t(78193),v=t(4534),y=t(78222),w=t(43371),C=t(35936),Z=function(e){if("TerminateRunSuccess"===(null===e||void 0===e?void 0:e.terminatePipelineExecution.__typename))throw new ErrorEvent("Not an error!");return null===e||void 0===e?void 0:e.terminatePipelineExecution},b=function(e){return{mustForce:!Object.keys(e).some((function(n){return e[n]})),frozenRuns:e,step:"initial",termination:{completed:0,errors:{}}}},k=function(e,n){switch(n.type){case"reset":return b(n.frozenRuns);case"toggle-force-terminate":return(0,c.Z)((0,c.Z)({},e),{},{mustForce:n.checked});case"start":return(0,c.Z)((0,c.Z)({},e),{},{step:"terminating"});case"termination-success":var t=e.termination;return(0,c.Z)((0,c.Z)({},e),{},{step:"terminating",termination:(0,c.Z)((0,c.Z)({},t),{},{completed:t.completed+1})});case"termination-error":var r=e.termination;return(0,c.Z)((0,c.Z)({},e),{},{step:"terminating",termination:(0,c.Z)((0,c.Z)({},r),{},{completed:r.completed+1,errors:(0,c.Z)((0,c.Z)({},r.errors),{},(0,s.Z)({},n.id,n.error))})});case"complete":return(0,c.Z)((0,c.Z)({},e),{},{step:"completed"})}},R=function(e){var n=e.isOpen,t=e.onClose,s=e.onComplete,c=e.selectedRuns,R=j.useRef(c),E=j.useReducer(k,R.current,b),O=(0,o.Z)(E,2),T=O[0],N=O[1],A=Object.keys(T.frozenRuns).length;j.useEffect((function(){n&&N({type:"reset",frozenRuns:R.current})}),[n]),j.useEffect((function(){n||(R.current=c)}),[n,c]);var I=(0,a.D)(w.zU),S=(0,o.Z)(I,1)[0],P=T.mustForce?v.vlg.MARK_AS_CANCELED_IMMEDIATELY:v.vlg.SAFE_TERMINATE,z=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,t,i,o,c,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N({type:"start"}),n=Object.keys(T.frozenRuns),t=0,i=n;case 3:if(!(t<i.length)){e.next=13;break}return o=i[t],e.next=7,S({variables:{runId:o,terminatePolicy:P}});case 7:c=e.sent,"TerminateRunSuccess"===(null===(a=c.data)||void 0===a?void 0:a.terminatePipelineExecution.__typename)?N({type:"termination-success"}):N({type:"termination-error",id:o,error:Z(a)});case 10:t++,e.next=3;break;case 13:N({type:"complete"}),s(T.termination);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(e){N({type:"toggle-force-terminate",checked:e.target.checked})},D=Object.keys(T.frozenRuns).some((function(e){return T.frozenRuns[e]})),F="terminating"!==T.step;return(0,C.jsxs)(g.Vq,{isOpen:n,title:"Terminate runs",canEscapeKeyClose:F,canOutsideClickClose:F,onClose:t,children:[(0,C.jsx)(g.a7,{children:(0,C.jsxs)(u.Z,{direction:"column",spacing:24,children:[function(){switch(T.step){case"initial":return A?(0,C.jsxs)(u.Z,{direction:"column",spacing:16,children:[(0,C.jsx)("div",{children:"".concat(A," ").concat(1===A?"run":"runs"," will be terminated. Do you wish to continue?")}),(0,C.jsx)("div",{children:D?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.X,{checked:T.mustForce,size:"small",label:"Force termination immediately",onChange:_}),T.mustForce?(0,C.jsxs)(p.x,{flex:{display:"flex",direction:"row",gap:8},margin:{top:8},children:[(0,C.jsx)(h.JO,{name:"warning",color:x.w.Yellow500}),(0,C.jsxs)("div",{children:[(0,C.jsx)("strong",{children:"Warning:"})," computational resources created by runs may not be cleaned up."]})]}):null]}):(0,C.jsxs)(u.Z,{direction:"row",spacing:8,children:[(0,C.jsx)(h.JO,{name:"warning",color:x.w.Yellow500}),(0,C.jsxs)("div",{children:[(0,C.jsx)("strong",{children:"Warning:"})," computational resources created by runs may not be cleaned up."]})]})})]}):(0,C.jsxs)(u.Z,{direction:"column",spacing:16,children:[(0,C.jsx)("div",{children:"No runs selected for termination."}),(0,C.jsx)("div",{children:"The runs you selected may already have finished executing."})]});case"terminating":case"completed":var e=A>0?T.termination.completed/A:1;return(0,C.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,C.jsx)("div",{children:T.mustForce?"Forcing termination\u2026":"Terminating\u2026"}),(0,C.jsx)(l.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"terminating"===T.step?(0,C.jsx)(y.c,{message:"Termination in progress, please do not navigate away yet."}):null]});default:return null}}(),function(){if("initial"===T.step)return null;if("terminating"===T.step)return(0,C.jsx)("div",{children:"Please do not close the window or navigate away during termination."});var e=T.termination.errors,n=Object.keys(e).length,t=T.termination.completed-n;return(0,C.jsxs)(u.Z,{direction:"column",spacing:8,children:[t?(0,C.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,C.jsx)(h.JO,{name:"check_circle",color:x.w.Green500}),(0,C.jsx)("div",{children:T.mustForce?"Successfully forced termination for ".concat(t,"\n                ").concat(1===t?"run":"runs","."):"Successfully requested termination for ".concat(t,"\n              ").concat(1===t?"run":"runs",".")})]}):null,n?(0,C.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,C.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,C.jsx)(h.JO,{name:"warning",color:x.w.Yellow500}),(0,C.jsx)("div",{children:T.mustForce?"Could not force termination for ".concat(n," ").concat(1===n?"run":"runs",":"):"Could not request termination for ".concat(n," ").concat(1===n?"run":"runs",":")})]}),(0,C.jsx)("ul",{children:Object.keys(e).map((function(n){var t;return(0,C.jsx)("li",{children:(0,C.jsxs)(u.Z,{direction:"row",spacing:8,children:[(0,C.jsx)(f.fv,{children:n.slice(0,8)}),e[n]?(0,C.jsx)("div",{children:null===(t=e[n])||void 0===t?void 0:t.message}):null]})},n)}))})]}):null]})}()]})}),(0,C.jsx)(g.cN,{children:function(){switch(T.step){case"initial":return A?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(m.zx,{intent:"none",onClick:t,children:"Cancel"}),(0,C.jsx)(m.zx,{intent:"danger",onClick:z,children:"".concat(T.mustForce?"Force termination for":"Terminate"," ","".concat(A," ").concat(1===A?"run":"runs"))})]}):(0,C.jsx)(m.zx,{intent:"none",onClick:t,children:"OK"});case"terminating":return(0,C.jsx)(m.zx,{intent:"danger",disabled:!0,children:T.mustForce?"Forcing termination for ".concat("".concat(A," ").concat(1===A?"run":"runs","...")):"Terminating ".concat("".concat(A," ").concat(1===A?"run":"runs","..."))});case"completed":return(0,C.jsx)(m.zx,{intent:"primary",onClick:t,children:"Done"})}}()})]})}},16483:function(e,n,t){t.d(n,{J:function(){return a}});var r=t(49668),i=(t(78193),t(97012)),o=t(70529),s=t(54860),c=t(35936),a=function(e){var n,t,a=(0,s.n)(e);if(!e)return null;if(!e.pipelineSnapshotId)return{icon:"error",tooltip:'"'.concat(e.pipelineName,'" could not be found.'),disabled:!0};if(a){var l=a.type;if("origin-and-snapshot"===l)return null;if("origin-only"===l)return{icon:"warning",tooltip:'The loaded version of "'.concat(e.pipelineName,'" may be different than the one used for the original run.'),disabled:!1};if("snapshot-only"===l){var u=e.repositoryOrigin?(0,o.Uz)((0,i.kQ)(e.repositoryOrigin.repositoryName,e.repositoryOrigin.repositoryLocationName)):null;return{icon:"warning",tooltip:(0,c.jsxs)(r.Z,{direction:"column",spacing:4,children:[(0,c.jsx)("div",{children:'The original run loaded "'.concat(e.pipelineName,'" from ').concat(u||"a different code location",".")}),u?(0,c.jsxs)("div",{children:["Original definition in: ",(0,c.jsx)("strong",{children:u})]}):null]}),disabled:!1}}return{icon:"warning",tooltip:'The job "'.concat(e.pipelineName,'" may be a different version from the original pipeline run.'),disabled:!1}}var d=null===(n=e.repositoryOrigin)||void 0===n?void 0:n.repositoryName,p=null===(t=e.repositoryOrigin)||void 0===t?void 0:t.repositoryLocationName;return{icon:"error",tooltip:(0,c.jsxs)(r.Z,{direction:"column",spacing:8,children:[(0,c.jsx)("div",{children:'"'.concat(e.pipelineName,'" is not available in your definitions.')}),d&&p?(0,c.jsx)("div",{children:"Load definitions for ".concat((0,i.At)(d,p)," and try again.")}):null]}),disabled:!0}}},54860:function(e,n,t){t.d(n,{n:function(){return a},r:function(){return c}});var r=t(16365),i=t(79357),o=function(e,n){if(!n)return null;var t=n.pipelineName,r=n.repositoryOrigin;if(!r)return null;var o=null===r||void 0===r?void 0:r.repositoryLocationName,s=null===r||void 0===r?void 0:r.repositoryName,c=e.find((function(e){return e.repository.name===s&&e.repositoryLocation.name===o}));return c&&(0,i.h)(c,t)?c:null},s=function(e,n){if(!n)return null;var t=n.pipelineName,r=(0,i.k)(e,t);return r.length?r:null},c=function(e){var n=(0,r.vl)().options,t=o(n,e);if(t)return{match:t,type:"origin"};var i=s(n,e);return i&&i.length?{match:i[0],type:"pipeline-name-only"}:null},a=function(e){var n=(0,r.vl)().options,t=o(n,e),c=function(e,n){var t;if(!n)return null;var r=n.pipelineName,o=null!==(t=n.parentPipelineSnapshotId)&&void 0!==t?t:n.pipelineSnapshotId;if(r&&o){var s=(0,i.k)(e,r,o);if(s.length)return s}return null}(n,e),a=s(n,e);if(t){if(c){var l=c.find((function(e){return e.repository.name===t.repository.name&&e.repositoryLocation.name===t.repositoryLocation.name}));if(l)return{match:l,type:"origin-and-snapshot"}}return{match:t,type:"origin-only"}}return c&&c[0]?{match:c[0],type:"snapshot-only"}:a&&a[0]?{match:a[0],type:"pipeline-name-only"}:null}}}]);
//# sourceMappingURL=741.51c650b6.chunk.js.map