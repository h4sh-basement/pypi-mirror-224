{% extends "base.html" %}

{% block title %}Litestream status{% endblock %}

{% block extra_head %}
{% endblock %}

{% block content %}
<h1>Litestream Status</h1>

PID: {{process.get("pid")}}
status: {{process.get("status")}}

<h2><code>litestream.yaml</code> Config</h2>
<pre>
  {{ litestream_config }}
</pre>

<h2>Logs</h2>
<pre>
{{ logs }}
</pre>

{% if not metrics_enabled %}
<strong>WARNING: metrics-addr was not defined, so no litestream metrics are available.</strong>
{% else %}


<h2>Metrics</h2>


<div><strong>Goroutines</strong>: {{ go_stats.get("go_goroutines") }}</div>
<div><strong>Go threads</strong>: {{ go_stats.get("go_threads") }}</div>


{% for db, metrics in metrics_by_db.items() %}
  <h3>{{ db }}</h3>
  <table>
    <thead>
      <tr>
        <th>Key</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      {% for key, value in metrics.items() %}
        <tr>
          <td><strong>{{ key }}</strong></td>
          <td>{{ value }}</td>
        </tr>
      {% endfor %}
  </table>
{% endfor %}

<style>
  dl {padding-left: 1rem;}
  dt {font-weight: bold;}
  dd {padding-left: 2rem;}
</style>


{% endif %}
{% endblock %}
