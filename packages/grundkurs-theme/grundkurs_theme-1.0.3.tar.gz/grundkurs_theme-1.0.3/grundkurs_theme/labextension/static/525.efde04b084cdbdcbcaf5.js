"use strict";(self.webpackChunkgrundkurs_theme=self.webpackChunkgrundkurs_theme||[]).push([[525],{525:(e,t,n)=>{n.r(t),n.d(t,{ContentFactoryWithFooterFeedback:()=>b,default:()=>h});var r=n(833),a=n(29),o=n.n(a);const s=({submit:e})=>{const[t,n]=(0,a.useState)(0),[r,s]=(0,a.useState)(!1),[c,l]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{c&&setTimeout((()=>{l(!1)}),5e3)}),[c]),o().createElement("div",{className:"gk-cell-feedback-container"},o().createElement("span",{className:"gk-exercise-label"},"Feedback"),o().createElement("div",{className:"rating"},["😜","😛","🙂","😕","😖"].map(((e,t)=>o().createElement("span",{onClick:()=>(e=>{n(e+1),s(!0)})(t),style:{margin:"10px"}},e)))),r&&o().createElement("div",{style:{display:"flex",flexDirection:"column",width:"280px",justifyContent:"space-around"}},o().createElement("div",{className:"submitted-message"},o().createElement("b",null,"You: "),o().createElement("span",null,"The exercise was ",o().createElement("b",null,["too easy","easy","good","hard","too hard"][t-1])),o().createElement("button",{className:"submit-button",onClick:()=>(async()=>{console.log(`Rating submitted: ${t}`),s(!1),e(t).then((()=>l(!0))).catch((e=>console.error(e)))})()},"Submit"))),c&&o().createElement("div",{className:"submitted-message"},o().createElement("b",null,"Us:")," Thank you for submitting your feedback 🙏"))};class c extends r.ReactWidget{constructor(e){super(),this.commands=e}render(){var e;return(null===(e=this.parent.model.sharedModel.getMetadata().tags)||void 0===e?void 0:e.includes("exercise"))?o().createElement(s,{submit:e=>this.commands.execute("grundkurs:send-feedback",{value:e})}):o().createElement(o().Fragment,null)}}var l=n(543),i=n(200),u=n(932),d=n(151),m=n(255);const g="grundkurs_theme:plugin",k={id:g,autoStart:!0,requires:[l.INotebookTracker,r.IThemeManager,i.ISettingRegistry],activate:(e,t,n,r)=>{const{commands:a,shell:o}=e;let s="";function c(e){s=e.get("url").composite}Promise.all([e.restored,r.load(g)]).then((([,e])=>{c(e),e.changed.connect(c),a.addCommand("grundkurs:send-feedback",{label:"Send feedback for this assignment",execute:async e=>{const n=function(e,t,n){const r=e.currentWidget;return!1!==n.activate&&r&&t.activateById(r.id),r}(t,o,e);if(n&&n.content.activeCell){const t=n.content.activeCell.model.id,r=e.value,a={cellId:t,url:s,value:r};try{await async function(e="",t={}){const n=m.ServerConnection.makeSettings(),r=d.URLExt.join(n.baseUrl,"grundkurs_theme",e);let a;try{a=await m.ServerConnection.makeRequest(r,t,n)}catch(e){throw new m.ServerConnection.NetworkError(e)}const o=await a.json();if(!a.ok)throw new m.ServerConnection.ResponseError(a,o.message);return o}("feedback",{body:JSON.stringify(a),method:"POST"})}catch(e){console.error(`Error on POST /feedback ${a}.\n${e}`)}}}})})),console.log("JupyterLab extension grundkurs_theme is activated!"),n.register({name:"grundkurs_theme",isLight:!0,load:()=>n.loadCSS("grundkurs_theme/index.css"),unload:()=>Promise.resolve(void 0)})}};class b extends l.NotebookPanel.ContentFactory{constructor(e,t){super(t),this.commands=e}createCellFooter(){return new c(this.commands)}}const h=[k,{id:"jupyterlab-cellcodebtn:factory",provides:l.NotebookPanel.IContentFactory,requires:[u.IEditorServices],autoStart:!0,activate:(e,t)=>{console.log("JupyterLab extensionn grundkurs_theme","overrides default nootbook content factory");const{commands:n}=e,r=t.factoryService.newInlineEditor;return new b(n,{editorFactory:r})}}]}}]);